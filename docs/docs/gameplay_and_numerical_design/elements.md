# 元素制衡基本设计

## 元素架构基本设计

根据故事设定，世界万物由“金木水火土”五种元素构成，按比例计算。  
1、元素互相克制，同比例情况下，金克木、木克水、水克火、火克土、土克金。  
2、当被克元素的强度为克元素的4倍以上时，实现反克。  
3、不相邻的元素视为不反应元素。  

世界实体的元素构成：  
1、场景元素（如花草、火堆、海洋）和活动实体（如敌对生命）都由五元素构成。  
2、实体可以由单元素构成，如树木，规定为纯木元素。  
3、实体可以由多元素构成，如岩层，规定为金元素和土元素的集合体。  

基本反应逻辑：  
玩家拿着由树枝和火形成的火把把进入水域，在水将火把淹没时，此时发生两种反应。  
第一，小火与大水反应，火焰被熄灭；  
第二，小木与大水反应，水吸附在木上（潮湿状态）。  

## 制衡数值计算

### 关于多种元素反应时的数值计算

```
令玩家和敌方拥有两种元素，则对于攻击方的任意一种元素，和被攻击方的元素的反应都有四种情况：
1、和两种元素都不反应；
2、克制其中一种元素；
3、被其中一种元素克制；
4、克制一种元素同时被一种元素克制。

防御强度值的计算优先级：发生反应的元素 > 不发生反应的元素
对于上述的第4种情况，防御强度值按照共同反应元素的衰减值进行计算。

在攻击方（被攻击方被动攻击时转守为攻）使用两种元素进行攻击时，分别带入攻击方的两种元素对被攻击方的防御强度值衰减值进行计算，最终衰减值取其中的最大值。
```

### 玩家主动攻击敌对实体

```
规定一种敌对实体，持有水元素的防御，则玩家不应该使用火元素和水元素进行攻击。
```

* 生命活性值计算

```
初始伤害 = (人物.基础攻击力 + 武器.基础攻击力) * (1 + 攻击力加成)

暴击时，基本输出伤害 = 初始伤害 * (1 + 暴击增伤)
未暴击时，基本输出伤害 = 初始伤害

金 -> 最终伤害 = 基本输出伤害
木 -> 最终伤害 = 基本输出伤害
水 -> 最终伤害 = 基本输出伤害 * (1 - 防御强度值)
火 -> 最终伤害 = 基本输出伤害 * (1 - 1.5 * 防御强度值)
土 -> 最终伤害 = 基本输出伤害
最终伤害 >= 0

当防御强度值为 0 时，全元素最终伤害为原来的 1.2 倍。
```

* 防御强度值计算

```
1、使用金、水、土元素进行攻击，不减弱敌方防御强度。
2、对于木元素的攻击：
（1）在未被反克的情况下，按照比例衰减敌方防御。
    衰减值 = (人物.攻击元素强度 + 武器.攻击元素强度) * (1 + 人物.元素强度增益) * random(4%, 6%)
（2）在被反克的情况下，不减弱敌方防御强度。
3、对于火元素的攻击：
​（1）在未反克的情况下，按照比例增强敌方防御。
    增强值 = (人物.攻击元素强度 + 武器.攻击元素强度) * (1 + 人物.元素强度增益) * random(2%, 3%)
​（2）在反克的情况下，不减弱敌方防御强度。
```

### 玩家被动攻击（弹反）敌对实体

```
规定一种敌对实体，持有水元素的攻击，则玩家不应该使用火元素和水元素进行攻击（弹反）。
```

* 生命活性值计算（不改变）

* 防御强度值计算

```
无论使用什么元素进行攻击（弹反），必定衰减敌方防御强度。

金 -> 衰减值 = (人物.攻击元素强度 + 武器.攻击元素强度) * (1 + 人物.元素强度增益) * 8%
木 -> 衰减值 = (人物.攻击元素强度 + 武器.攻击元素强度) * (1 + 人物.元素强度增益) * 12%
水 -> 衰减值 = (人物.攻击元素强度 + 武器.攻击元素强度) * (1 + 人物.元素强度增益) * 5%
火 -> 衰减值 = (人物.攻击元素强度 + 武器.攻击元素强度) * (1 + 人物.元素强度增益) * 3%
土 -> 衰减值 = (人物.攻击元素强度 + 武器.攻击元素强度) * (1 + 人物.元素强度增益) * 8%
```

### 敌对实体主动攻击玩家

```
规定一种敌对实体，持有水元素的攻击，则玩家应该使用木、水元素进行防御。
```

* 生命活性值计算

```
初始伤害 = (敌对实体.基础攻击力 + 武器.基础攻击力) * (1 + 攻击力加成)

暴击时，基本输出伤害 = 初始伤害 * (1 + 暴击增伤)
未暴击时，基本输出伤害 = 初始伤害

玩家防御强度值元素为金、木、水、火、土时减少的生命活性值：
金 -> 最终伤害 = 基本输出伤害
木 -> 最终伤害 = 基本输出伤害 * (1 - 1.5 * 防御强度值)
水 -> 最终伤害 = 基本输出伤害 * (1 - 防御强度值)
火 -> 最终伤害 = 基本输出伤害
土 -> 最终伤害 = 基本输出伤害
最终伤害 >= 0

当防御强度值为 0 时，全元素最终伤害为原来的 1.2 倍。
```

* 防御强度值计算

```
1、使用金、水、土元素进行防御，不减弱我方防御强度。
2、使用木元素进行防御：
（1）在未被反克的情况下，按照比例增加我方防御，上限为进入战斗时的防御强度值的105%。
    增强值 = (敌对实体.攻击元素强度 + 武器.攻击元素强度) * (1 + 敌对实体.元素强度增益) * random(2%, 3%)
（2）在被反克的情况下，不减弱我方防御强度。
3、使用火元素进行防御：
​（1）在未反克的情况下，按照比例衰减我方防御。
    衰减值 = (敌对实体.攻击元素强度 + 武器.攻击元素强度) * (1 + 敌对实体.元素强度增益) * random(4%, 6%)
​（2）在反克的情况下，不减弱我方防御强度。
```

## 制衡效果赋予

### 正面效果

* **蓄势待发**：按照攻击叠加层数，轻击+1，重击+2。层数达到10时，下一次主动攻击的最终伤害变为原来的300%，且清空所有层数。在任意层数时，若8秒内未进行攻击，则清空所有层数。
* **势如破竹**：按照攻击叠加层数，轻击+1，重击不叠加层数。每一层都增加3%移动速度并强化闪避能力。层数达到20时，再增加20%移动速度，持续8秒，清空所有层数。若8秒内未进行攻击，则清空所有层数。
* **坚如磐石**：受到必打断的攻击时，只有30%的概率被打断。
* **万物复苏**：每1秒增加原来5%的生命值。
* **风驰电掣**：增加20%移动速度，强化闪避能力。

### 负面效果

* **暮气沉沉**：降低50%移动速度，增加防御强度值衰减值为原来的150%。
* **监禁森林**：无法进行移动。
* **头晕目眩**：视角扭曲、变白，按照控制方向相反的方向移动。
* **浴火泣血**：每1秒降低原来1%的生命值。

## 玩家被动技能

### 玩家主动攻击敌对实体

```
金 -> 蓄势待发
木 -> 每次攻击具有10%的概率让敌人触发3秒“监禁森林”，3次攻击内最多触发1次，若10次内没有触发，则下一次必定触发。
水 -> 势如破竹
火 -> 孤注一掷：可使用攻击的方式弹反：若触发弹反效果，则造成原伤害400%的伤害；若未触发弹反，则收到200%真实伤害。
土 -> 坚如磐石
```

### 玩家被动攻击（弹反）敌对实体

```
数值待定
金 -> 降低敌方4%的生命活性值。
木 -> 让我方触发5秒“万物复苏”。
水 -> 风驰电掣
火 -> 烈焰眩域：让敌人触发3秒“头晕目眩”，在敌人周围形成持续8秒的燃烧圈，为圈内所有实体附加“浴火泣血”。
土 -> 让敌方触发5秒“暮气沉沉”。
```

### 敌对实体主动攻击玩家

```
不同敌对实体单独设计
```
